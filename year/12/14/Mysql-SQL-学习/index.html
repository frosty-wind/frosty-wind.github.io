<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/frosty-wind.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/frosty-wind.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/frosty-wind.github.io/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/frosty-wind.github.io/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/frosty-wind.github.io/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/frosty-wind.github.io/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/frosty-wind.github.io/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="-后端," />










<meta name="description" content="学习网站 MYSQL(SQL)学习windows cmd 下mysql一些基本命令 连接认证:IP和端口确认,如果是本地都可以省略   连接 -h 主机地址    ———-      -hlocalhost(可以是ip) -P(大写) 端口 —————–  -p3306(mysql一般是3306)  认证：通关用户名和密码进入服务器 -u 用户名 —-  -uroot，不可以省略(匿名用户除外)">
<meta name="keywords" content="-后端">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql(SQL)学习">
<meta property="og:url" content="https:&#x2F;&#x2F;frosty-wind.github.io&#x2F;year&#x2F;12&#x2F;14&#x2F;Mysql-SQL-%E5%AD%A6%E4%B9%A0&#x2F;index.html">
<meta property="og:site_name" content="frosty的博客">
<meta property="og:description" content="学习网站 MYSQL(SQL)学习windows cmd 下mysql一些基本命令 连接认证:IP和端口确认,如果是本地都可以省略   连接 -h 主机地址    ———-      -hlocalhost(可以是ip) -P(大写) 端口 —————–  -p3306(mysql一般是3306)  认证：通关用户名和密码进入服务器 -u 用户名 —-  -uroot，不可以省略(匿名用户除外)">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-05-25T13:28:17.541Z">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/frosty-wind.github.io/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://frosty-wind.github.io/year/12/14/Mysql-SQL-学习/"/>





  <title>Mysql(SQL)学习 | frosty的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/frosty-wind.github.io/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">frosty的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/frosty-wind.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/frosty-wind.github.io/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/frosty-wind.github.io/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/frosty-wind.github.io/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/frosty-wind.github.io/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://frosty-wind.github.io/frosty-wind.github.io/year/12/14/Mysql-SQL-%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frosty">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/frosty-wind.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="frosty的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Mysql(SQL)学习</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-14T20:40:55+08:00">
                2019-12-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/frosty-wind.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index">
                    <span itemprop="name">-[数据库]</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://www.bilibili.com/video/av15351498?p=6" target="_blank" rel="noopener">学习网站</a></p>
<h1 id="MYSQL-SQL-学习"><a href="#MYSQL-SQL-学习" class="headerlink" title="MYSQL(SQL)学习"></a>MYSQL(SQL)学习</h1><h2 id="windows-cmd-下mysql一些基本命令"><a href="#windows-cmd-下mysql一些基本命令" class="headerlink" title="windows cmd 下mysql一些基本命令"></a>windows cmd 下mysql一些基本命令</h2><ol>
<li><p>连接认证:IP和端口确认,如果是本地都可以省略 </p>
<ul>
<li><p>连接</p>
<p>-h 主机地址    ———-      -hlocalhost(可以是ip)</p>
<p>-P(大写) 端口 —————–  -p3306(mysql一般是3306)</p>
</li>
<li><p>认证：通关用户名和密码进入服务器 -u 用户名 —-  -uroot，不可以省略(匿名用户除外)</p>
<p>-p 密码 —- </p>
</li>
<li><p>退出命令</p>
<p>\q</p>
</li>
</ul>
<p>注意:通常连接认证，密码不建议明文，可以在输入-p之后回车，系统会让再次输入密码</p>
</li>
</ol>
<h2 id="操作学习"><a href="#操作学习" class="headerlink" title="操作学习"></a>操作学习</h2><h3 id="启动和停止MySQL"><a href="#启动和停止MySQL" class="headerlink" title="启动和停止MySQL"></a>启动和停止MySQL</h3><p>即启动Mysqld.exe</p>
<ol>
<li><p>命令行: Net start 服务(mysql):开启服务</p>
<p>net stop 服务(mysql): 开启服务</p>
<p>注:若显示服务名无效，<strong><u><a href="https://blog.csdn.net/ermaner666/article/details/79096939" target="_blank" rel="noopener">解决方法</a></u></strong></p>
</li>
<li><p>系统服务方式:</p>
</li>
</ol>
<h3 id="登入退出mysql"><a href="#登入退出mysql" class="headerlink" title="登入退出mysql"></a>登入退出mysql</h3><p>登入的是mysql.exe</p>
<p>(前文控制台下的命令已写)</p>
<p>基本认证语法 mysql -h(服务器ip/域名) -P(端口号) -u(用户名) -p(密码，不推荐使用明文)</p>
<p>退出: Exit;(带分号)</p>
<p>\q</p>
<p>Quit</p>
<h3 id="设置字符集"><a href="#设置字符集" class="headerlink" title="设置字符集"></a>设置字符集</h3><p>set names 字符集</p>
<h3 id="基本操作-库"><a href="#基本操作-库" class="headerlink" title="基本操作(库)"></a>基本操作(库)</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><p>create database 数据库名字 [库选项]:   (中括号代表可有可无)</p>
<p>库选项，数据库的相关属性</p>
<p>字符集:charset 字符集 代表着当前数据库下的所有表存储的数据默认指定的字符集(默认是DBMS)</p>
<p>校对集:collate 校对集</p>
<h4 id="显示数据库"><a href="#显示数据库" class="headerlink" title="显示数据库"></a>显示数据库</h4><p>使用SQL创建数据库后，会产生一个对应的存储数据的文件夹(data目录下)</p>
<p>数据库文件夹下都有一个opt文件，保存数据库选项</p>
<ol>
<li><p>show databases : 显示全部数据库</p>
</li>
<li><p>show databases like ‘匹配模式’;匹配模式如下</p>
<p>_:匹配当前位置单个字符</p>
<p>%:匹配指定位置多个字符集</p>
<p>eg : ‘my%’:my开头的全部数据库</p>
<p>‘m_database’:m开头后第一个字母不确定</p>
</li>
<li><p>show create database 数据库名字:显示数据库创建语句(系统加工后的指令)</p>
</li>
</ol>
<h4 id="显示数据库-1"><a href="#显示数据库-1" class="headerlink" title="显示数据库"></a>显示数据库</h4><p>数据存储在数据表下，数据表下存储在数据库下</p>
<p>use 数据库名字:选择数据库;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Database changed --表示当前已经进入到指定的数据库</span><br></pre></td></tr></table></figure>

<h4 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h4><p>alter database 数据库名字 charset [=] 字符集</p>
<p>修改数据库字符集(库选项):字符集和校对集</p>
<p>5.5之后无法修改数据库名字</p>
<p>修改成功，对应的opt文件会体现</p>
<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><p>drop database 数据库名字:删除数据库</p>
<h3 id="基本操作-表"><a href="#基本操作-表" class="headerlink" title="基本操作(表)"></a>基本操作(表)</h3><h4 id="创建数据表-需先进入数据库"><a href="#创建数据表-需先进入数据库" class="headerlink" title="创建数据表(需先进入数据库)"></a>创建数据表(需先进入数据库)</h4><p>create table 表名(字段名 字段类型 [字段属性], 字段名 字段类型 [字段属性],..) [表选项];</p>
<p>表选项:与数据库选项类似-</p>
<p>Engine:存储引擎(mysql提供的具体存储数据的方式默认innodb)  Charset:字符集(级别比数据库高)  Collate: 校对集)</p>
<p>eg:创建班级表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--创建数据表</span><br><span class="line">create table class(</span><br><span class="line">-- 字段名 字段类型</span><br><span class="line">-- 字段与表分不开</span><br><span class="line">name varchar(10) -- 10个字符(不能超过)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>可能会提示No database selected:表必须放到对应的数据库下方法如下</p>
<ol>
<li>create table mydatabase2.class(….): 即在创建的表名前加数据库名+”.”</li>
<li>创建表前，进入数据库，即 use 数据库名</li>
</ol>
<hr>
<p>create table 表明 like 表明:从已经存在的表复制一份(只复制结构，如果表中有数据不复制)</p>
<p>注: 只要使用数据库.表名，就可以在任何数据库下访问其他数据库的表名</p>
<hr>
<p>每当一张数据表创建，那么就会在对应的数据表下创建一些文件(数量，形式等与存储引擎有关)</p>
<p>frm文件是结构文件对应innodb存储引擎,数据存在父目录下的ibdata文件中</p>
<h4 id="显示表"><a href="#显示表" class="headerlink" title="显示表"></a>显示表</h4><p>show tables:显示所有表</p>
<p>show tabales like ‘匹配模式’:匹配数据表</p>
<hr>
<p>显示表结构(显示表中所包含的字段信息(名字，类型，属性等))</p>
<p>describe(desc) 表名;</p>
<p>show columns from 表名;</p>
<p>显示如下(假设创建了个class的表)</p>
<table>
<thead>
<tr>
<th>Filed(字段名字)</th>
<th>Type(字段类型)</th>
<th>Null(值是否允许为空)</th>
<th>Key(索引)</th>
<th>Default(默认值)</th>
<th>Extra(额外的属性)</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>varchar&lt;10&gt;</td>
<td>Yes</td>
<td></td>
<td>NULL(表示默认值为NULL)</td>
<td></td>
</tr>
</tbody></table>
<hr>
<p>show creat table 表名:查看表的创建语句(已被系统改过)</p>
<hr>
<p>Mysql的语句结束符</p>
<p>;与\g效果一样,字段在上排,下面跟对应的数据 </p>
<p>\G 字段在左侧竖着,数据在右侧</p>
<p>eg:show create table 表名\G</p>
<h4 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h4><ol>
<li><p>rename table 旧表名 to 新表名 :修改表名</p>
</li>
<li><p>alter table 表名 表选项 [=] 值:修改表选项</p>
</li>
<li><p>alter table 表名 add [column]  新字段名 列类型 [列属性] [位置first/after 字段名]:新增字段</p>
<p>eg : alter table studen add column age int (默认是加到表的最后面)</p>
<p>First : 在某某之前(最前面),第一个字段</p>
<p>After 字段名: 放在某个字段之后(默认)</p>
</li>
<li><p>alter table 表名 change 旧字段名 新字段名 字段类型 [列属性] [新位置]:修改字段名;</p>
<p>新字段名一般有新类型,所以必须输入字段类型</p>
</li>
<li><p>alter table 表名 modify 字段名 新类型 [新属性] [新位置]</p>
</li>
<li><p>alter table 表名 drop 字段名 : 删除字段</p>
</li>
</ol>
<h4 id="删除表结构"><a href="#删除表结构" class="headerlink" title="删除表结构"></a>删除表结构</h4><p>drop table 表名 [,表名2…]:删除(多个)表</p>
<h3 id="基本操作-数据"><a href="#基本操作-数据" class="headerlink" title="基本操作(数据)"></a>基本操作(数据)</h3><h4 id="插入操作-将数据存储在数据表-字段-里"><a href="#插入操作-将数据存储在数据表-字段-里" class="headerlink" title="插入操作(将数据存储在数据表(字段)里)"></a>插入操作(将数据存储在数据表(字段)里)</h4><ol>
<li>insert into 表名[(字段列表)] values(对应字段列表)–(这个不需要对应表结构)</li>
</ol>
<p>eg:insert into my_teacher (name,age)  values(‘Jack’,30);</p>
<ol start="2">
<li>Insert into 表名 values (对应表结构)</li>
</ol>
<h4 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作"></a>查询操作</h4><ol>
<li><p>select * from 表名 : 查询表中全部数据  (*是个通配符,表示匹配所有的字段)</p>
</li>
<li><p>select 字段列表 from 表名 :查询表中部分字段 (字段列表使用逗号隔开)</p>
<p>eg select name from my_teacher;</p>
</li>
<li><p>select 字段列表/* from 表名 where 字段名 = 值 :简单条件查询数据(mysql中没有==)</p>
<p>eg : select name from my_teacher where age = 30 (查询年龄为30岁的人)</p>
</li>
</ol>
<h4 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h4><p>delete from 表名 [where 条件]; (没where条件,意味着系统会自动删除该表所有数据)</p>
<p>eg: delete from my_teacher where age = 30;</p>
<h4 id="更新操作"><a href="#更新操作" class="headerlink" title="更新操作"></a>更新操作</h4><p>update 表名 set 字段名 = 新值 [where 条件] (没有则修改全部)</p>
<p>eg: update my_teacher set age = 28 where name = ‘Han’; </p>
<h3 id="字段类型-列类型"><a href="#字段类型-列类型" class="headerlink" title="字段类型(列类型)"></a>字段类型(列类型)</h3><h4 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h4><ol>
<li><p>Tinyint</p>
<p>迷你整形,系统采用一个字节来保存的整形 一个字节=8位,最大能表示的数值0-255(需设置为无符号型,默认为有符号型)</p>
</li>
<li><p>Smallint</p>
<p>小整形,2个字节,0-65535</p>
</li>
<li><p>Mediumint</p>
<p>中整形,3个字节</p>
</li>
<li><p>Int</p>
<p>整形(标准整形),4个字节</p>
</li>
<li><p>Begint</p>
<p>大整形,8个字节</p>
</li>
</ol>
<p>注:设置为无符号需在类型后面加个unsigned</p>
<p>eg:creat table my_int(</p>
<p>int_1 tinyint,</p>
<p>int_2 smallint</p>
<p>)</p>
<p>注:在desc (表名) 中 属性后跟了一个数字代表着显示长度</p>
<p>显示长度:指数据(整形)在数据显示的时候,到底可以显示多长位(若想要数据显示的时候,保持最高位,需要给字段增加一个zerofill属性,跟在tinyint后面,zerofill会绑定unsigned)</p>
<h4 id="小数类型"><a href="#小数类型" class="headerlink" title="小数类型"></a>小数类型</h4><p>浮点型</p>
<ol>
<li>float:4个字节(另一种表示方法float(M,D),M个有效数字,小数部分占D位)</li>
<li>double:8个字节</li>
</ol>
<p>定点数:能够保证数据精确的小数(小数部分可能不精确,整数部分一定正确)</p>
<ol>
<li>Decimal: Decimal(M,d):M表示总长度,不超65,D表示小数部分长度,不超30</li>
</ol>
<h4 id="时间日期类型"><a href="#时间日期类型" class="headerlink" title="时间日期类型"></a>时间日期类型</h4><ol>
<li><p>Date</p>
<p>日期类型,3个字节,格式YYYY-mm-dd表示范围1000-01-01到9999-12-12,初始值0000-00-00</p>
</li>
<li><p>Time</p>
<p>时间类型:表示某个指定的时间,3个字节,格式HH:ii:ss(时分秒),mysql中表示的时间范围大得多-839:59:59-839:59:59。用来表示时间段</p>
</li>
<li><p>Datetime</p>
<p>日期时间类型:将Date和time合并起来,8个字节,格式YYYY-mm-dd HH:ii:ss,区间为各自单独能表示的区间</p>
</li>
<li><p>Timestamp</p>
<p>时间戳类型:从格林威治时间开始,与Datetime格式相同</p>
</li>
<li><p>Year</p>
<p>年类型:1个字节,能表示1900-2155年,两种插入方式0~99和四位数的具体年(69,70做界限70后是19,69前是20,如70会显示1970)</p>
</li>
</ol>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><ol>
<li><p>char </p>
<p>定长字符,char(L),L代表字符数(中文与英文字母一样),L长度为0到255</p>
</li>
<li><p>Varchar</p>
<p>变长字符,系统根据世纪储存的数据计算长度,分配合适长度,</p>
<p>Varchar(L),L代表字符数,理论上为0到65535(但一般用于少于256的长度)</p>
</li>
<li><p>Text</p>
<p>文本类型</p>
<p>Text:存储普通的字符文本</p>
<p>Blob:存储二进制文本(图片,文件),但一般不用,一般使用链接来指向文件</p>
<p>Text:系统中提供四种text</p>
<ol>
<li>Tinytext:使用一个字节,实际能够存储数据2^8 +1</li>
<li>Text:2个字节,实际2^16+2(一般用这个,因为系统会自动选择合适的类型)</li>
<li>Mediumtext:3个字节,2^24+3</li>
<li>Longtext:4个字节,2^32+4</li>
</ol>
</li>
<li><p>Enum</p>
<p>枚举类型:数据插入前确定了几个项可能是最终的数据结果,如性别,确定了不是男就是女就可以用枚举</p>
<p>enum(数据值1,数据值2)</p>
<p>注:因为enum的储存原理是用取下标,即1=&gt;数据值1,2=&gt;数据值2,那么可以直接用数值来插入(可用来节省空间)</p>
</li>
<li><p>set</p>
<p>将多个数据项同时保存的数据类型,将指定的项按照对应的二进制来进行控制,1表示该选项被选中,0表示没选中</p>
<p>set(‘值1’,’值2’…)</p>
<p>与Enum存储的是数字,而不是字符串</p>
</li>
</ol>
<h3 id="字段属性-列属性"><a href="#字段属性-列属性" class="headerlink" title="字段属性(列属性)"></a>字段属性(列属性)</h3><p>一共有6个属性:null , 默认值,列描述,主键,唯一键,和自动增长</p>
<h4 id="Null属性"><a href="#Null属性" class="headerlink" title="Null属性"></a>Null属性</h4><p>NULL的代表字段为空,若对应值为YES,表示字段可以为NULL</p>
<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><p>default:默认值,当用户不插入数据时所使用的值,通常为NULL</p>
<h4 id="列描述"><a href="#列描述" class="headerlink" title="列描述"></a>列描述</h4><p>comment,是给开发人员进行维护的一个注释说明</p>
<p>用法: comment ‘字段描述’;</p>
<p>注:想查看注释,必须查看表创建语句</p>
<h4 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h4><p>主键是指主要的键,在一张表中,有且只有一个字段,里面的值具有唯一性(主键的字段内容不能为空,NOT NULL)</p>
<h5 id="创建主键"><a href="#创建主键" class="headerlink" title="创建主键"></a>创建主键</h5><ol>
<li><p>直接在需要当作主键的字段之后,增加primary key属性来确定主键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table my_pri1(</span><br><span class="line">username varchar(10) primary key</span><br><span class="line">)charset utf8;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>在所有字段之后增加primary key的选项primary key(字段信息)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table my_pri1(</span><br><span class="line">username varchar(10),</span><br><span class="line">primary key(username)</span><br><span class="line">)charset utf8;</span><br></pre></td></tr></table></figure>
</li>
<li><p>alter table 表名 add primary key(字段);</p>
</li>
</ol>
<h5 id="查看主键"><a href="#查看主键" class="headerlink" title="查看主键"></a>查看主键</h5><ol>
<li>查看表结构,即desc 表名</li>
<li>查看创建语句</li>
</ol>
<h5 id="删除主键"><a href="#删除主键" class="headerlink" title="删除主键"></a>删除主键</h5><p>alter table 表名 drop primary key;</p>
<p>注:虽然删除了主键,但是不能改变NOT NULL</p>
<h5 id="复合主键"><a href="#复合主键" class="headerlink" title="复合主键"></a>复合主键</h5><ol>
<li>在创建表的时候,全部字段后跟primary key(字段名1,字段名2)</li>
</ol>
<h5 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h5><p>主键增加后,会对对应的字段有数据要求</p>
<ol>
<li>当前字段对应的数据不能空</li>
<li>当前字段对应的数据不能重复</li>
</ol>
<h4 id="自动增长"><a href="#自动增长" class="headerlink" title="自动增长"></a>自动增长</h4><p>auto_increment:当给定某个字段属性之后，该列的数据没有提供确定数据,系统会根据之前已经存在的数据进行自动增加后,填充数据(一张表最多自能拥有一个自增长)</p>
<p>当给定属性的字段没有提供值,自动增长才会触发(只适用于数值)</p>
<h5 id="初始设置"><a href="#初始设置" class="headerlink" title="初始设置"></a>初始设置</h5><p>show variables like ‘auto_increment%’:查看属性</p>
<p>auto_increment_increment: 步长</p>
<p>auto_increment_offset:起始值</p>
<h5 id="使用自动增长"><a href="#使用自动增长" class="headerlink" title="使用自动增长"></a>使用自动增长</h5><p>字段后加一个属性auto_increment</p>
<h5 id="修改自动增长"><a href="#修改自动增长" class="headerlink" title="修改自动增长"></a>修改自动增长</h5><ol>
<li>查看自增长:查看创建语句</li>
<li>alter table 表名 auto_increment= 值;(修改的值不能比当前值大,虽然未报错,但修改不成功)</li>
</ol>
<h5 id="删除自增长"><a href="#删除自增长" class="headerlink" title="删除自增长"></a>删除自增长</h5><p>只需要在修改表的字段属性时不添加auto_increment就行了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table my_auto modify id int;(增加自增长类似,直接在int后面加一个auto_increment)</span><br></pre></td></tr></table></figure>

<h4 id="唯一键"><a href="#唯一键" class="headerlink" title="唯一键"></a>唯一键</h4><p>唯一键: unique key , 保证字段数据唯一</p>
<p>主键也可保证唯一,但一张表只有一个</p>
<p>唯一键一张表可有多个(但数据可以为NULL,且可以为多个)</p>
<h5 id="创建唯一键"><a href="#创建唯一键" class="headerlink" title="创建唯一键"></a>创建唯一键</h5><ol>
<li><p>与主键类似,在表字段后增加唯一键标识符:unique key</p>
</li>
<li><p>在所有字段后使用unique key(字段列表)</p>
</li>
<li><p>创建表后增加: </p>
<p>alter table 表名 unique key(字段列表)</p>
</li>
</ol>
<h5 id="查看唯一键"><a href="#查看唯一键" class="headerlink" title="查看唯一键"></a>查看唯一键</h5><p>desc 表 名    key 对应UNI</p>
<p>查看创建语句</p>
<h5 id="删除唯一键"><a href="#删除唯一键" class="headerlink" title="删除唯一键"></a>删除唯一键</h5><p>alter table 表名 drop index 唯一键名字;</p>
<p>注:无法修改唯一键,要达到修改的目的,需要先删除后增加</p>
<h5 id="复合唯一键"><a href="#复合唯一键" class="headerlink" title="复合唯一键"></a>复合唯一键</h5><p>与主键一样</p>
<h3 id="表关系"><a href="#表关系" class="headerlink" title="表关系"></a>表关系</h3><p>表关系: 表与表之间(实体)有什么样的关系</p>
<h4 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h4><p>一条表中的一条记录与另外一张表最多有一条明确的关系,通常,此设计方案保证两张表使用同样主键</p>
<p>用处:例如一张学生信息表,需记录学生ID(primary key),姓名,年龄,性别,籍贯,地址。而籍贯,地址,一般查的比较少,这个时候一般会将他们分别记录到两张表中,这个时候就可以将学生ID设为两张表的主键,保证每个唯一ID对应唯一一个学生的信息,</p>
<h4 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h4><p>在”多”关系的表中去维护一个字段,这个字段是”一”关系的主键,例如下面多指孩子,一指母亲</p>
<p>例如一张母亲表,一张孩子表,一个母亲可以对应多个孩子,但一个孩子只能对应一个母亲</p>
<p>这个时候就在孩子ID中多加一个字段为”母亲ID”</p>
<h4 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h4><p>一张表中的一条记录在另外一张表中可以匹配到多条记录,反过来一样</p>
<p>这个时候通过两张表自己增加字段不能解决问题,那么这个时候就通关第三张表来解决问题</p>
<p>eg:师生关系</p>
<ol>
<li>一个老师教过多个班级的学生</li>
<li>一个学生听过多个老师讲课</li>
</ol>
<p>首先得有两个实体,老师表,学生表 </p>
<p>从中间设计一张表,维护两张表对应的联系,在这张表中通过一对一最终实现多对多.(逐一列举有关系的两者)</p>
<h3 id="高级数据操作"><a href="#高级数据操作" class="headerlink" title="高级数据操作"></a>高级数据操作</h3><h4 id="新增数据"><a href="#新增数据" class="headerlink" title="新增数据"></a>新增数据</h4><h5 id="多数据插入"><a href="#多数据插入" class="headerlink" title="多数据插入"></a>多数据插入</h5><p>只要写一次insert,但是可以插入多条记录</p>
<p>insert into 表名 [(字段列表)] values(值列表),(值列表)….</p>
<h5 id="主键冲突"><a href="#主键冲突" class="headerlink" title="主键冲突"></a>主键冲突</h5><p>进行数据插入前,不确定数据表中是否已经存在对应的主键</p>
<ol>
<li><p>insert into 表名 [(字段列表)] values(值列表) on duplicate update 字段 = 新值:若主键冲突则采取更新的方法</p>
<p>例如你要一个人id为04,现在你想让其他人的id为04,使用该命令后,人名会被替换掉,但id04不变</p>
</li>
<li><p>replace into [(字段列表)] values(值列表);</p>
<p>主键冲突后,会删掉原来的数据,重新插入进去(效率没有insert高)</p>
</li>
</ol>
<h5 id="蠕虫复制"><a href="#蠕虫复制" class="headerlink" title="蠕虫复制"></a>蠕虫复制</h5><p>一分为二,成倍增加,从已有的数据中获取数据,再将数据插入到数据表中</p>
<p>insert table 表名 [(字段列表)] select */字段列表 from 表; (表名一样,不清楚是否可不一样)</p>
<h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><p>由前文知,若更新数据时没有加条件那么就是全表更新,但是可以用limit来限制更新的数量</p>
<p>update 表名 set 字段名 = 新值 [where 判断条件] limit 数量; (注,有条件也可以更改limit,因为满足where条件的可能有多个)</p>
<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><p>也可使用limit</p>
<p>Delete数据不能重置auto_increment</p>
<p>Truncate 表名; 能够重置自增长(这个相当于先drop再creat)</p>
<h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h4><p>完整的查询指令</p>
<p>Select select选项 字段列表 from 数据源 where 条件 group by 分组 having 条件 order by 排序 limit 限制</p>
<h5 id="Select-选项"><a href="#Select-选项" class="headerlink" title="Select 选项"></a>Select 选项</h5><p>系统该如何对待查询得到的结果</p>
<p>All : 默认 , 表示所有的记录</p>
<p>Distinct : 去除重复的记录 , 只保留一条 (所有字段都相同)</p>
<h5 id="字段列表"><a href="#字段列表" class="headerlink" title="字段列表"></a>字段列表</h5><p>有时候从需从多张表获取书,再获取数据时,可能不同表中有同名字段,这个时候需将同名字段命成不同名:别名alias</p>
<p>语法,在查询语句中:    字段名 [as] 别名</p>
<h5 id="from-数据源"><a href="#from-数据源" class="headerlink" title="from 数据源"></a>from 数据源</h5><p>from是为全面的查询提供数据,数据源是需要是个符号二维表结构的数据即可</p>
<ol>
<li><p>单表数据</p>
<p>语法: from 表名</p>
</li>
<li><p>多表数据</p>
<p>从多张表获取数据</p>
<p>语法: from 表名1, 表名2；</p>
<p>结果:两张表记录数相乘,字段数拼接(所以尽量少用)</p>
</li>
<li><p>动态数据</p>
<p>from后面跟的数据不是一个实体表,而是一个从表中查询出来得到的二维结果表(子查询)</p>
<p>语法: from (select 字段列表 from 表名) as 别名; (别名必需的)</p>
<p>eg : select * from (select int_1,int_8 from my_int) as int_my</p>
</li>
</ol>
<h5 id="where子句"><a href="#where子句" class="headerlink" title="where子句"></a>where子句</h5><p>通过运算符比较来判断数据</p>
<h5 id="Group-by-子句"><a href="#Group-by-子句" class="headerlink" title="Group by 子句"></a>Group by 子句</h5><p>表示分组:根据指定的字段,将数据进行分组</p>
<ol>
<li><p>分组统计:</p>
<p>group by 字段名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_studentt group by class_id; -- 根据班级id进行分组</span><br></pre></td></tr></table></figure>

<p>group by 是为了分组后数据统计,分组后只会保留分组后第一条记录(一般与聚合函数一起用)</p>
</li>
<li><p>多分组</p>
<p>将数组按某个字段分组,对已经分组的数据再次分组</p>
<p>group by 字段1,字段2 –先按照字段1排序,再按照字段二排序</p>
</li>
<li><p>分组排序</p>
<p>group by 字段1 [asc|desc] , 字段2[asc|desc],(默认为升序asc)</p>
</li>
</ol>
<h5 id="having子句"><a href="#having子句" class="headerlink" title="having子句"></a>having子句</h5><p>Having 本质和where一样,进行数据条件筛选</p>
<ol>
<li><p>在group by 子句之后,可以针对分组数据进行统计筛选,但是where不行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select class_id,conut(*) as number from my_student group by class_id having number &gt;=4   -- 挑选班级人数大于4的班级</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h5 id="order-by-子句"><a href="#order-by-子句" class="headerlink" title="order by 子句"></a>order by 子句</h5><p>Order by 排序: 根据校对规则对数据进行排序</p>
<p>语法: order by 字段 [asc|desc] – asc 升序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student order by stu_height asc;</span><br></pre></td></tr></table></figure>

<p>可进行多字段排序,先按照第一个字段,再按照第二个字段</p>
<p>order by 字段1[asc|desc],字段2[asc|desc]</p>
<h5 id="limit-子句"><a href="#limit-子句" class="headerlink" title="limit 子句"></a>limit 子句</h5><p>限制数量获取</p>
<ol>
<li><p>记录数限制</p>
<p>纯粹的限制获取的数量:从第一条到指定的数量</p>
<p>limit 数量</p>
</li>
<li><p>分页</p>
<p>用limit限制指定区间的数据</p>
<p>语法: limit offset length; </p>
<p>offset: 偏移量–从哪儿开始</p>
<p>length: 具体的获取多少条记录(数量不够,获取完就结束)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">limit 0,2 -- 获取前两条记录</span><br><span class="line">limit 2,2 -- 获取第三四条记录。</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="查询中的运算符"><a href="#查询中的运算符" class="headerlink" title="查询中的运算符"></a>查询中的运算符</h4><h5 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h5><p>可用在查询中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 如</span><br><span class="line">select int_1 + int_2 ,  int_1 - int_2 from ysf1</span><br></pre></td></tr></table></figure>

<p>mysql中除法的运算结果用浮点数表示</p>
<h5 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h5><p>在mysql中无==判等,而是直接使用=</p>
<p>注: select ‘1’ &lt;=&gt; 1 (这不能用=否则为赋值,而使用&lt;=&gt;,)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student where stu_height &gt;= 170;</span><br><span class="line">select * from my_student where stu_age between 20 and 30 ; -- between 语法 , 查找20,30之间的人,且是闭区间, 条件1必须小于条件2,即20和30不能互换</span><br></pre></td></tr></table></figure>

<h5 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h5><ol>
<li><p>and : 逻辑与</p>
</li>
<li><p>or : 逻辑或3. </p>
</li>
<li><p>not: 逻辑非</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student where stu_age &lt;=30 and stu_age &gt;= 20;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>In : 在什么里面,用来替代= ， 结果不是一个值, 而是多个</p>
<p>语法in(结果1,结果2,结果3…),只要当前条件在结果集中出现过,那么就成立</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student where stu_id in(&apos;stu00001&apos;,&apos;stu0002&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Is : 专门用来判断字段是否为NULL的运算符(用=的话,返回的也是NULL)</p>
<p>语法: is null / is not null</p>
</li>
<li><p>like: 用来进行模式匹配</p>
<p>语法 like ‘匹配模式’(_与%)(前文已有</p>
</li>
</ol>
<h4 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h4><p>可合并多个相似的选择查询的结果集。等同于将一个表追加到另一个表,从而实现将两个表的查询组合到一起,使用谓词为UNION或UNIONALL()</p>
<p>即:将多个查询结果纵向合并到一起:字段数不变,多个查询的记录数合并</p>
<p>用处:</p>
<ol>
<li><p>将同一张表不同结果合并展现数据.</p>
<p>例如,男生升高升序排序,女生升高降序排序。</p>
</li>
<li><p>因数据量较大,通常将同一类型数据分到多张表中,在对数据进行统计的时候,用联合查询将数据存放在一起显示</p>
</li>
</ol>
<p>语法:</p>
<p>select 语句</p>
<p>Union [union选项]</p>
<p>select 语句</p>
<p>Union 选项:与select基本一样</p>
<p>Distinct: 去掉完全重复的数据(默认)</p>
<p>All: 保存所有结果</p>
<p>注:union理论上只需保证字段属一样,不需要每次拿到的数据对应字段类型一致(且保留第一个select的字段)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student</span><br><span class="line">union</span><br><span class="line">select * from my_student;</span><br></pre></td></tr></table></figure>

<h5 id="order-by的使用"><a href="#order-by的使用" class="headerlink" title="order by的使用"></a>order by的使用</h5><p>联合查询中,如果要使用order by,那么对应的select语句必须用括号括起来</p>
<p>且若要order by生效必须配合limit使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(select * from my_student where gender = &apos;男&apos; order by stu_height asc limit 10)</span><br><span class="line">union</span><br><span class="line">(select * from my_student where gender = &apos;女&apos; order by stu_height desc limit 10 )</span><br></pre></td></tr></table></figure>

<h4 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h4><p>将多张表连接到一起进行查询(会导致记录数行和字段属列都会发生改变)</p>
<p>意义:在关系型数据库涉及过程中,实体(表)与实体之间是存在很多联系的,如前往呢所说的一对一,多对一,多对多.</p>
<h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><ol>
<li><p>交叉连接</p>
<p>将两张表的数据与另外一张表彼此交叉</p>
<p>即从第一张表依次取出每一条记录,然后与另外一张表的全部记录挨个匹配,没有匹配条件,所有结果保留,所以记录数 = 第一张表记录数 * 第二张表记录数;字段数  = 第一张表字段数 + 第二张表记录数</p>
<p>语法: 表1 cross join 表2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student cross join my_int;</span><br></pre></td></tr></table></figure>
</li>
<li><p>内连接</p>
<p>inner join , 从一张表中取出所有的连接去另一张表匹配(有条件),成功则保留,失败了则放弃</p>
<p>语法: 表1 [join] 表2 on 匹配条件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student inner join my_class on my_student.class_id = my_class.id; -- 通常加上表名,通常还会用表别名例如</span><br><span class="line">select * from my_student as s inner join my_class as c on s.class_id = c.id ; --这种更简便</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li><p>外连接 </p>
<p>outer join:按照保留一张表(主表),根据条件去连接另外一张表(从表),根据保留哪一张表分为:</p>
<ul>
<li><p>左外连接(左连接): left join</p>
<p>语法: 主表 left join 从表 on 连接条件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student as s left join my_class c on s.class_id = c.id;</span><br></pre></td></tr></table></figure>
</li>
<li><p>右外连接(右连接): right join</p>
<p>语法: 从表right join 从表 on 连接条件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student as s right join my_class as c on s.class_id = c.id;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>左连接主表在左边,右连接主表在右边</p>
<p>语法中左边的表在左边,同理右边</p>
<p>注:即使主表在从表中一条都未匹配成功,也需要保留该记录,从表对应的字段值都为NULL</p>
</li>
</ol>
<h4 id="Using关键字"><a href="#Using关键字" class="headerlink" title="Using关键字"></a>Using关键字</h4><p>在连接查询中代替on,进行条件匹配,使用后,对应的同名字段,最终在结果中只会保留一个</p>
<p>语法: 表1 [inner,left,right] join 表2 using(同名字段列表); // 连接字段</p>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>(sub query),当一个查询是另一个查询的条件,即一条select语句中,嵌入了另外一条select语句,那么被嵌入的select语句称之为子查询语句 </p>
<p>(补充,主查询:主要的查询对象,第一条select语句)</p>
<p>分类还可按位置分为where子查询,from子查询</p>
<p>where子查询➡(标量子查询,列子查询,行子查询)</p>
<p>from子查询➡(表子查询,Exists子查询)</p>
<h5 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h5><p>子查询返回结果是一个数据</p>
<p>语法: select * from 数据源 where 条件判断 =/&lt;&gt; (select 字段名 from 数据源 where 条件判断); –&lt;&gt;:不等于</p>
<h5 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h5><p>返回的结果是一列(一列多行)</p>
<p>语法 : 主查询 where 条件 in(列子查询)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select name from my_class where class_id in (select class_id from my_student)</span><br></pre></td></tr></table></figure>

<h5 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h5><p>返回的结果是一行(一行多列)</p>
<p>语法: 主查询 where 条件 [(构造一个行元素)] = (行子查询);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_student where (stu_age,stu_height) = (select max(stu_age),max(stu_height) from my_student);</span><br></pre></td></tr></table></figure>

<h5 id="表子查询"><a href="#表子查询" class="headerlink" title="表子查询"></a>表子查询</h5><p>返回的结果是多行多列</p>
<p>语法: select 字段表 from (表子查询) as 别名 [where] [group by ] [havinf] [limit];</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from (select * from my_student order by stu_height desc) as temp group by class_id</span><br><span class="line">-- 因为ogroup by选择的是第一个,所以先用一个select语句将最最高的放在第一个,再用此查询,查出每个班最高的人</span><br><span class="line">-- 注: as 别名 是必须的,因为from后跟的是查询,from无法识别,所以需一个名字</span><br></pre></td></tr></table></figure>



<h5 id="Exists子查询"><a href="#Exists子查询" class="headerlink" title="Exists子查询"></a>Exists子查询</h5><p>返回的结果是1或0(类似布尔),代表成立与不成立</p>
<p>语法: where exists(查询语句);//where 1永远为真</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from my_class as c where exists(select stu_id from my_student as a where s.class_id = c.class_id);</span><br><span class="line">-- 求出,有学生在的所有班级</span><br></pre></td></tr></table></figure>

<h5 id="子查询关键字"><a href="#子查询关键字" class="headerlink" title="子查询关键字"></a>子查询关键字</h5><ol>
<li><p>In</p>
<p>主查询 where 条件 in(列子查询);</p>
</li>
<li><p>Any</p>
<p>任意一个</p>
<p>= any(列子查询): 条件在查询结果中有任意一个匹配即可,等价于In</p>
<p>&lt;&gt;any(列子查询): 条件在查询结果中不等于任意一个</p>
<p>eg: 1 = any(1,2,3)➡ true</p>
<p>1 &lt;&gt;any(1,2,3)➡ true</p>
</li>
<li><p>Some</p>
<p>与any完全一样</p>
</li>
<li><p>ALL</p>
<p>= all(列子查询): 等于里面所有</p>
<p>&lt;&gt;all(列子查询): 不等于里面所有</p>
</li>
</ol>
<h3 id="整库数据备份与还原"><a href="#整库数据备份与还原" class="headerlink" title="整库数据备份与还原"></a>整库数据备份与还原</h3><p>又名SQL数据备份:备份结果都是SQL指令(mysqldump.exe专门用于备份SQL的客户端)</p>
<p>备份数据和指令,在数据库被破坏的时候能还原</p>
<p>备份文件较大,不适合特大数据备份</p>
<h4 id="SQL备份"><a href="#SQL备份" class="headerlink" title="SQL备份"></a>SQL备份</h4><p>使用前需先于数据库服务器进行连接</p>
<p>即: mysql/mysqldump.exe -hPU 数据库名字 [表1, [表2…]]  &gt;  备份文件地址</p>
<h5 id="整库备份"><a href="#整库备份" class="headerlink" title="整库备份"></a>整库备份</h5><p>只提供数据库名字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump.exe -hlocalhost -P3306 -uroot -p123456 mydatabase &gt; (保存的文件夹,后缀可跟.sql)</span><br></pre></td></tr></table></figure>

<p>在cmd中输入</p>
<h5 id="单表备份-见多表备份"><a href="#单表备份-见多表备份" class="headerlink" title="单表备份(见多表备份)"></a>单表备份(见多表备份)</h5><h5 id="多表备份"><a href="#多表备份" class="headerlink" title="多表备份"></a>多表备份</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump.exe -hlocalhost -P3306 -uroot -p123456 mydatabase my_student my_int &gt; (地址)</span><br></pre></td></tr></table></figure>

<h4 id="数据还原"><a href="#数据还原" class="headerlink" title="数据还原"></a>数据还原</h4><h5 id="通过mysql-exe客户端"><a href="#通过mysql-exe客户端" class="headerlink" title="通过mysql.exe客户端"></a>通过mysql.exe客户端</h5><p>登录mysql前, Mysql.exe -hPup  数据库 &lt; 文件位置</p>
<h5 id="SQL指令"><a href="#SQL指令" class="headerlink" title="SQL指令"></a>SQL指令</h5><p>Source  SQL文件位置 //必须先进入到对应的数据库</p>
<h5 id="人为操作"><a href="#人为操作" class="headerlink" title="人为操作"></a>人为操作</h5><p>打开备份文件,复制所有SQL指令,然后到mysql中粘贴复制(不推荐)</p>
<h3 id="用户权限管理"><a href="#用户权限管理" class="headerlink" title="用户权限管理"></a>用户权限管理</h3><p>指在不同的项目中给不同的角色(开发者)不同权限,为了保证数据库安全</p>
<p>通常一个用户的密码不会长期不变,需要经常变更密码</p>
<h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><p>Mysql中所有的用户信息都在user表中 select * from mysql.exe\G (查看信息,\G是为了显示美观)</p>
<p>在安装如果不选择匿名用户,以为着用户只有一个root(超级用户)</p>
<p>User: 用户名</p>
<p>host: 代表允许访问的客户端(ip或者主机地址), (*代表所有用户可以访问)</p>
<h5 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h5><ol>
<li><p>直接用rott用户在mysql.user表中插入记录(不推荐)</p>
</li>
<li><p>使用SQL指令</p>
<p>create user 用户名 identfied by ‘明文密码’</p>
<p>用户: 用户名@主机地址</p>
<p>主机地址: ‘’/‘%’  (代表所有地址)  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user &apos;user1&apos;@&apos;/%&apos; identified by 123456</span><br></pre></td></tr></table></figure>

<p>简化创建用户信息(通常不用,谁都可以访问)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user user2 -- 不限定可客户端IP, 没有密码的用户</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h5 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h5><p>drop user 用户名@host</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop user user2@&apos;/%&apos;;</span><br></pre></td></tr></table></figure>

<h5 id="修改用户密码"><a href="#修改用户密码" class="headerlink" title="修改用户密码"></a>修改用户密码</h5><ol>
<li><p>set password for 用户 = password(‘新的密码’)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password for &apos;user1&apos;@&apos;%&apos; = password(&apos;654321&apos;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>update mysql.user set password = password(‘新的密码’) where user = ‘ ‘ and host = ‘ ‘;</p>
</li>
</ol>
<h4 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h4><p>权限管理分类三类</p>
<p>数据权限:增删改查(select、update、delete、insert)</p>
<p>结构权限:结构操作(create、drop)</p>
<p>管理权限:权限管理(create user、grant、revoke)</p>
<h5 id="授予权限"><a href="#授予权限" class="headerlink" title="授予权限"></a>授予权限</h5><p>grant 权限列表 on 数据库.表名(\*代表整个数据库) to 用户</p>
<p>权限列表:用逗号分隔,all privileges代表全部权限</p>
<p>数据库.表名:可是单表,也可以是具体的整个数据库(数据库.<em>),也可以整库(\</em>.*)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant select on mydb.my_student to &apos;user1&apos;@&apos;%&apos;;</span><br></pre></td></tr></table></figure>

<h5 id="取消权限"><a href="#取消权限" class="headerlink" title="取消权限"></a>取消权限</h5><p>revoke 权限列表 on 数据库.表 from 用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboke all privilegs on mydb.my_student from &apos;user1&apos;@&apos;%&apos;;</span><br></pre></td></tr></table></figure>

<h5 id="刷新权限"><a href="#刷新权限" class="headerlink" title="刷新权限"></a>刷新权限</h5><p>对用户的全选操作刷新,将操作的具体内容同步到对应的表中</p>
<p>flush privileges</p>
<h3 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h3><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><h4 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h4><p>视图本质是SQL指令(select语句)</p>
<p>create view 视图名字 as select 指令 // 可以是单表数据,也可以是连接查询,联合查询,子查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">creat view student_class_v as</span><br><span class="line">select * s.*,c.name from my_student as s left join</span><br><span class="line">my_class as c</span><br><span class="line">on</span><br><span class="line">s.class_id = c.class_id</span><br></pre></td></tr></table></figure>

<p>视图本身是虚拟表,关于表的一些操作,视图都可以用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables/show creat table [view].desc 视图名字</span><br></pre></td></tr></table></figure>

<h4 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a>使用视图</h4><p>视图是一张虚拟表,可直接当做”表”操作,本身无数据,临时执行select语句得到对应的结果,主要是查询操作</p>
<p>select 字段列表 from 视图名字 [子句]</p>
<h4 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h4><p>修改视图对应的查询语句</p>
<p>alter view 视图名字 as 新 select 语句</p>
<h4 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h4><p>drop view 视图名字</p>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><h4 id="自动事务"><a href="#自动事务" class="headerlink" title="自动事务"></a>自动事务</h4><p>查看事务: show variables like ‘autocommit’;</p>
<p>关闭自动事务:set autocommit = off; (注一般不关闭,只会在特定情况才才关掉)</p>
<p>提交(同步到数据表,事务也会被清空): Commit </p>
<p>回滚(清空之前的操作): Rollback</p>
<p>(即使没有同步到数据表,当前客户端查询的时候,能显示执行过后的操作,因为查询的时候,系统会先用事务日志对数据进行加工,但是其他客户端看不见)</p>
<h4 id="手动事务"><a href="#手动事务" class="headerlink" title="手动事务"></a>手动事务</h4><p>手动事务:不管是开始还是过程还是结束都需要用户手动发送事务操作指令来实现</p>
<p>一个事务开启的时候,其他客户端无法操作使用事务的客户端正在操作的数据</p>
<h5 id="开启事务"><a href="#开启事务" class="headerlink" title="开启事务"></a>开启事务</h5><p>start transaction:开启事务//从这条语句开始,后面语句就会保存在事务日志,而不是写入数据</p>
<h5 id="执行事务"><a href="#执行事务" class="headerlink" title="执行事务"></a>执行事务</h5><p>将多个连续的整体的SQL指令,逐一执行</p>
<h5 id="提交事务"><a href="#提交事务" class="headerlink" title="提交事务"></a>提交事务</h5><p>确认提交: commit: 数据写到数据表(清空)</p>
<p>回滚操作: rollback: 所有数据无效并清空</p>
<h5 id="回滚点"><a href="#回滚点" class="headerlink" title="回滚点"></a>回滚点</h5><p>savepoin:当一系列事务操作时,而其中的步骤如果成功了,没有必要重新来过,可以在某个点,设置一个记号(回滚点),如果后面有失败可以回到这个记号位置</p>
<ol>
<li>增加回滚点: savepoin 回滚点名字 </li>
<li>回到回滚点: rollback to 回滚点名字</li>
</ol>
<p>注:如果回到前面的回滚点,后面的回滚点会失效</p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>Mysql本质时编程语言,需要变量来保存数据</p>
<h4 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h4><p>show variables [ like : patter]: 查看系统所有变量</p>
<p>select @@变量名:查看系统变量</p>
<p>修改系统变量:</p>
<ol>
<li><p>局部修改,只针对当前自己的客户端(档次连接有效)</p>
<p>set 变量名 = 新值</p>
</li>
<li><p>全局修改:针对所有的客户端,”所有时刻”都有效</p>
<p>set global 变量名 = 值 // 或者: set @@global.变量名 = 值</p>
<p>注:全局修改只针对新客户端有效(对当前的客户端无效)</p>
</li>
</ol>
<h4 id="会话变量"><a href="#会话变量" class="headerlink" title="会话变量"></a>会话变量</h4><p>也叫用户变量,与客户端绑定,只对当前用户使用的客户端生效</p>
<p>set @变量名 = 值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @name = &apos;hello wrold&apos;;</span><br></pre></td></tr></table></figure>

<p>因mysql中无==判等号,为了区分赋值与判等,加了一个赋值符号 :=</p>
<p>set @变量名 := 值</p>
<hr>
<p>通过查询数据为变量赋值:</p>
<ol>
<li><p>select @变量1 = 字段1 ,@变量2 := 字段2 from 数据表 where 条件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @name := stu_name,@stu_age from my_student limit 1 ; -- mysql中无数组,所以限制1条</span><br></pre></td></tr></table></figure>

<p>注:用 ‘=’会被系统判断为判等符号</p>
</li>
<li><p>select 字段1,字段2 … from 数据源 where 条件 into @变量1, @变量2..</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select stu_name,stu_age from my_student order by stu_height desc limit 1 into @name,@age;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>select @变量 : 查看变量</p>
<h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><ol>
<li>局部变量使用declare 关键字声明</li>
<li>局部变量declare语句出现位置一定是begin 和end之间 (begined是在大型语句块中使用:函数/存储过程/触发器)</li>
<li>声明语法: declare 变量名 数据类型[属性];</li>
</ol>
<h3 id="流程结构"><a href="#流程结构" class="headerlink" title="流程结构"></a>流程结构</h3><p>即代码执行顺序</p>
<h4 id="if分支"><a href="#if分支" class="headerlink" title="if分支"></a>if分支</h4><h5 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h5><ol>
<li><p>用在select查询中</p>
<p>语法: if(条件,为真结果,为假结果)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select *,if(stu_age&gt;20,&apos;符合&apos;,&apos;不符合&apos;)as judge from my_student </span><br><span class="line">-- 与where不同的是,不管大不大于20数据都会显示,但是会多一个字段显示符合或者不符合</span><br></pre></td></tr></table></figure>
</li>
<li><p>用在复杂的语句块中(函数/存储过程/触发器)</p>
<p>语法:</p>
<p>if 条件表达式 then</p>
<p>&emsp;满足条件要执行的语句;</p>
<p>End if;</p>
</li>
</ol>
<h5 id="复合语法"><a href="#复合语法" class="headerlink" title="复合语法"></a>复合语法</h5><p>代码的判断存在两面性,两面都有对应的代码执行</p>
<p>语法:</p>
<p>if 条件表达式 then</p>
<p>&emsp;满足条件要执行的语句;</p>
<p>Else</p>
<p>&emsp;不满足条件要执行的语句;</p>
<p>End if; //不能继续加else if,只能在里面嵌套使用if,else</p>
<h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><h5 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h5><p>循环体都是需要在大型代码块中使用</p>
<p>While 条件 do</p>
<p>&emsp;要循环执行的代码;</p>
<p>End while;</p>
<h5 id="结构标识符"><a href="#结构标识符" class="headerlink" title="结构标识符"></a>结构标识符</h5><p>为某些特定的结构进行命名,为了是在某些地方使用名字</p>
<p>基本语法:</p>
<p>标识名字:While 条件 do</p>
<p>循环体</p>
<p>End while[标识名字];</p>
<p>标识符的存在是为了循环体中使用循环控制,mysql中无continue和break而是用其他的关键字替代</p>
<p>Iterate:迭代,就是以下的代码不执行,重新开始循环(continue)</p>
<p>Leave:离开,整个循环终止(break)</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>分为两类,系统函数(内置函数)和自定义函数</p>
<p>不管哪一种,都是使用select 函数名(参数列表);</p>
<h4 id="内置函数-部分"><a href="#内置函数-部分" class="headerlink" title="内置函数(部分)"></a>内置函数(部分)</h4><h5 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h5><p>Char_length()：判断字符串的字符数</p>
<p>Length()：判断字符串的字节数（与字符集）</p>
<p>Concat()：连接字符串</p>
<p>Instr()：判断字符在目标字符串中是否存在，存在返回其位置，不存在返回0</p>
<p>Lcase()：全部小写</p>
<p>Left()：从左侧开始截取，直到指定位置（位置如果超过长度，截取所有）</p>
<p>Ltrim()：消除左边对应的空格</p>
<p>Mid()：从中间指定位置开始截取，如果不指定截取长度，直接到最后</p>
<h5 id="时间函数"><a href="#时间函数" class="headerlink" title="时间函数"></a>时间函数</h5><p>Now()：返回当前时间，日期 时间</p>
<p>Curdate()：返回当前日期</p>
<p>Curtime()：返回当前时间</p>
<p>Datediff()：判断两个日期之间的天数差距，参数日期必须使用字符串格式（用引号）</p>
<p>Date_add(日期,interval 时间数字 type)：进行时间的增加</p>
<p>​    Type:day/hour/minute/second</p>
<p>Unix_timestamp()：获取时间戳</p>
<p>From_unixtime()：将指定时间戳转换成对应的日期时间格式</p>
<h5 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h5><p>Abs()：绝对值</p>
<p>Ceiling()：向上取整</p>
<p>Floor()：向下取整</p>
<p>Pow()：求指数，谁的多少次方</p>
<p>Rand()：获取一个随机数（0-1之间）</p>
<p>Round()：四舍五入函数</p>
<h5 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h5><p>Md5()：对数据进行md5加密（mysql中的md5与其他任何地方的md5加密出来的内容是完全相同的）</p>
<p>Version()：获取版本号</p>
<p>Databse()：显示当前所在数据库</p>
<p>UUID()：生成一个唯一标识符（自增长）：自增长是单表唯一，UUID是整库（数据唯一同时空间唯一）</p>
<h4 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h4><p>自定义函数：用户自己定义的函数</p>
<p>函数：实现某种功能的语句块（由多条语句组成）</p>
<p>1、 函数内部的每条指令都是一个独立的个体：需要符合语句定义规范：需要语句结束符分号；</p>
<p>2、 函数是一个整体，而且函数是在调用的时候才会被执行，那么当设计函数的时候，意味着整体不能被中断；</p>
<p>3、 Mysql一旦见到语句结束符分号，就会自动开始执行</p>
<p>解决方案：在定义函数之前，尝试修改临时的语句结束符</p>
<p>基本语法：delimiter</p>
<p>修改临时语句结束符：delimiter 新符号[可以使用系统非内置即可$$]</p>
<p>中间为正常SQL指令：使用分号结束（系统不会执行：不认识分号）</p>
<p>使用新符号结束</p>
<p>修改回语句结束符：delimiter ;</p>
<h5 id="创建函数"><a href="#创建函数" class="headerlink" title="创建函数"></a>创建函数</h5><p>Create function 函数名(形参) returns 返回值类型</p>
<p>Begin</p>
<p>​    //函数体</p>
<p>​    Return 返回值数据;   //数据必须与结构中定义的返回值类型一致</p>
<p>End</p>
<p>语句结束符</p>
<p>修改语句结束符（改回来）</p>
<p>注:若只有一条语句可不要begin和end</p>
<p>形参：在mysql中需要为函数的形参指定数据类型（形参可以有多个）</p>
<p>基本语法：变量名 字段类型</p>
<h5 id="查看函数"><a href="#查看函数" class="headerlink" title="查看函数"></a>查看函数</h5><ol>
<li><p>查看function状态,查看所有函数</p>
<p>Show function status [like ‘pattern’];</p>
</li>
<li><p>查看函数创建语句</p>
<p>show creat funtion 函数名字;(不加括号)</p>
</li>
</ol>
<h5 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h5><p>于内置函数调用一致</p>
<h5 id="删除函数"><a href="#删除函数" class="headerlink" title="删除函数"></a>删除函数</h5><p>drop function 函数名;(不加括号)</p>
<h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><p>自定义函数只能在当前数据库中使用</p>
<p>函数内部不能使用select(除了定义变量时使用)</p>
<h3 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h3><h4 id="局部作用域"><a href="#局部作用域" class="headerlink" title="局部作用域"></a>局部作用域</h4><p>使用declare关键字声明（在结构体内：函数/存储过程/触发器），而且只能在结构体内部使用</p>
<h4 id="会话作用域"><a href="#会话作用域" class="headerlink" title="会话作用域"></a>会话作用域</h4><p>用户定义的，使用@符号定义的变量，使用set关键字</p>
<p>会话作用域：在当前用户当次连接有效，只要在本连接之中，任何地方都可以使用（可以在结构内部，也可以跨库）</p>
<h4 id="全局作用域"><a href="#全局作用域" class="headerlink" title="全局作用域"></a>全局作用域</h4><p>所有的客户端所有的连接都有效：需要使用全局符号来定义</p>
<p>Set global 变量名 = 值;</p>
<p>Set @@global.变量名 = 值;</p>
<p>通常，在SQL编程的时候，不会使用自定义变量来控制全局。一般都是定义会话变量或者在结构中使用局部变量来解决问题。</p>
<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL 语句集，存储在数据库中，经过第一次编译后再次调用不需要再次编译（效率比较高），用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象（针对SQL编程而言）。</p>
<p>存储过程：简称过程</p>
<h4 id="与函数的区别"><a href="#与函数的区别" class="headerlink" title="与函数的区别"></a>与函数的区别</h4><h5 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h5><p>1、 存储过程和函数目的都是为了可重复地执行操作数据库的sql语句的集合。</p>
<p>2、 存储过程函数都是一次编译，后续执行</p>
<h5 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h5><p>1、标识符不同。函数的标识符为FUNCTION，过程为：PROCEDURE。</p>
<p>2、函数中有返回值，且必须返回，而过程没有返回值。</p>
<p>3、过程无返回值类型，不能将结果直接赋值给变量；函数有返回值类型，调用时，除在select中，必须将返回值赋给变量。</p>
<p>4、函数可以在select语句中直接使用，而过程不能：函数是使用select调用，过程不是。</p>
<h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><h5 id="创建过程"><a href="#创建过程" class="headerlink" title="创建过程"></a>创建过程</h5><p>Create procedure 过程名字([参数列表])</p>
<p>Begin</p>
<p>​    过程体</p>
<p>End</p>
<p>结束符</p>
<h5 id="查看过程"><a href="#查看过程" class="headerlink" title="查看过程"></a>查看过程</h5><p>与查看函数一致(除关键字)</p>
<p>查看全部存储过程：show procedure status [like ‘pattern’];</p>
<p>查看过程创建语句：show create procedure 过程名字;</p>
<h5 id="调用过程"><a href="#调用过程" class="headerlink" title="调用过程"></a>调用过程</h5><p>过程：无返回值，因此select不可能调用</p>
<p>调用过程有专门的语法：call 过程名([实参列表]);</p>
<h5 id="删除过程"><a href="#删除过程" class="headerlink" title="删除过程"></a>删除过程</h5><p>基本语法：drop procedure 过程名字;</p>
<h4 id="参数类型"><a href="#参数类型" class="headerlink" title="参数类型"></a>参数类型</h4><p>存储过程也允许提供参数（形参和实参）：存储的参数也和函数一样，需要指定其类型。</p>
<p>但是存储过程对参数还有额外的要求：自己的参数分类</p>
<h5 id="In"><a href="#In" class="headerlink" title="In"></a>In</h5><p>表示参数从外部传入到里面使用（过程内部使用）：可以是直接数据也可以是保存数据的变量</p>
<h5 id="Out"><a href="#Out" class="headerlink" title="Out"></a>Out</h5><p>表示参数是从过程里面把数据保存到变量中，交给外部使用：传入的必须是变量</p>
<p>如果说传入的out变量本身在外部有数据，那么在进入过程之后，第一件事就是被清空，设为NULL</p>
<h5 id="Inout"><a href="#Inout" class="headerlink" title="Inout"></a>Inout</h5><p>数据可以从外部传入到过程内部使用，同时内部操作之后，又会将数据返还给外部。</p>
<h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><p>过程类型 变量名 数据类型; //in int_1 int</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create procedure my_pro3(in int_1 int,out int_2，inout int_3 int)</span><br></pre></td></tr></table></figure>

<h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><h4 id="触发器概念"><a href="#触发器概念" class="headerlink" title="触发器概念"></a>触发器概念</h4><p>触发器是一种特殊类型的存储过程，它不同于我们前面介绍过的存储过程。触发器主要是通过事件进行触发而被执行的，而存储过程可以通过存储过程名字而被直接调用。</p>
<p>触发器：trigger，是一种非常接近于js中的事件的知识。提前给某张表的所有记录（行）绑定一段代码，如果改行的操作满足条件（触发），这段提前准备好的代码就会自动执行。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>1、可在写入数据表前，强制检验或转换数据。（保证数据安全）</p>
<p>2、触发器发生错误时，异动的结果会被撤销。（如果触发器执行错误，那么前面用户已经执行成功的操作也会被撤销：事务安全）</p>
<p>3、部分数据库管理系统可以针对数据定义语言（DDL）使用触发器，称为DDL触发器。</p>
<p>4、可依照特定的情况，替换异动的指令 (INSTEAD OF)。（mysql不支持）</p>
<h4 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h4><h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><p>1、 触发器可通过数据库中的相关表实现级联更改。（如果某张表的数据改变，可以利用触发器来实现其他表的无痕操作[用户不知道]）</p>
<p>2、 保证数据安全：进行安全校验</p>
<h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><p>1、 对触发器过分的依赖，势必影响数据库的结构，同时增加了维护的复杂<a href="http://baike.baidu.com/view/644590.htm" target="_blank" rel="noopener">程度</a>。</p>
<p>2、 造成数据在程序层面不可控。（PHP层）</p>
<h4 id="基本操作-1"><a href="#基本操作-1" class="headerlink" title="基本操作"></a>基本操作</h4><h5 id="创建触发器"><a href="#创建触发器" class="headerlink" title="创建触发器"></a>创建触发器</h5><p>Create trigger 触发器名字 触发时机 触发事件 on 表 for each row</p>
<p>Begin</p>
<p>End</p>
<hr>
<p>触发对象：on 表 for each row，触发器绑定实质是表中的所有行，因此当每一行发生指定的改变的时候，就会触发触发器.</p>
<hr>
<p>触发时机：每张表中对应的行都会有不同的状态，当SQL指令发生的时候，都会令行中数据发生改变，每一行总会有两种状态：数据操作前和操作后</p>
<p>Before：在表中数据发生改变前的状态</p>
<p>After：在表中数据已经发生改变后的状态</p>
<hr>
<p>触发事件：mysql中触发器针对的目标是数据发生改变，对应的操作只有写操作（增删改）</p>
<p>Insert：插入操作</p>
<p>Update：更新操作</p>
<p>Delete：删除操作</p>
<hr>
<p>注意事项:一张表中，每一个触发时机绑定的触发事件对应的触发器类型只能有一个：一张表中只能有一个对应after insert触发器</p>
<p>因此，一张表中最多的触发器只能有6个：before insert，before update，before delete，after insert，after update，after delete</p>
<h5 id="查看触发器"><a href="#查看触发器" class="headerlink" title="查看触发器"></a>查看触发器</h5><ol>
<li><p>查看全部触发器</p>
<p>Show triggers;</p>
</li>
<li><p>查看触发器的创建语句</p>
<p>Show create trigger 触发器名字;</p>
</li>
</ol>
<h5 id="触发触发器"><a href="#触发触发器" class="headerlink" title="触发触发器"></a>触发触发器</h5><p>想办法让触发器执行：让触发器指定的表中，对应的时机发生对应的操作即可。</p>
<p>1、 表为my_orders</p>
<p>2、 在插入之后</p>
<p>3、 插入操作</p>
<h5 id="删除触发器"><a href="#删除触发器" class="headerlink" title="删除触发器"></a>删除触发器</h5><p>基本语法：drop trigger 触发器名字;</p>
<h4 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h4><p>触发器针对的是数据表中的每条记录（每行），每行在数据操作前后都有一个对应的状态，触发器在执行之前就将对应的状态获取到了，将没有操作之前的状态（数据）都保存到old关键字中，而操作后的状态都放到new中。</p>
<p>在触发器中，可以通过old和new来获取绑定表中对应的记录数据。</p>
<p>基本语法：关键字.字段名</p>
<p>Old和new并不是所有触发器都有：</p>
<p>Insert：插入前全为空，没有old</p>
<p>Delete：清空数据，没有new</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-- 通过订单更新商品库存</span><br><span class="line">-- 两张表,一张订单表,一张库存表</span><br><span class="line">-- 订单表中有goods_id与goods_num字段</span><br><span class="line">-- 库存表中有id(1,2,3),name(手机,电脑,游戏机),inv(1000,500,100)字段</span><br><span class="line">-- 需要做到订单更新后,库存表对应商品减少对应数量</span><br><span class="line">delimiter $$</span><br><span class="line">create trigger a_i_o_t after insert on my_orders for each row</span><br><span class="line">begin</span><br><span class="line">		-- 更新商品库存:new代表新增的订单</span><br><span class="line">		update my_goods set inv = inv - new.goods_num where id = new.goods_id</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line">-- 在取出库存之前还需判断库存数量是否足够</span><br><span class="line">delimiter $$</span><br><span class="line">create trigger b_i_o_t after insert on my_orders for each row</span><br><span class="line">begin</span><br><span class="line">		-- 取出库存数据进行判断</span><br><span class="line">		select inv from my_goods where id = new.goods_id into @inv ;</span><br><span class="line">		-- 判断</span><br><span class="line">		if @inv &lt; new.goods_num then</span><br><span class="line">				-- 中断操作:暴力解决,主动出错</span><br><span class="line">				insert into XXX values(&apos;XXX&apos;);</span><br><span class="line">		end if;</span><br><span class="line">end</span><br><span class="line">$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>




      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/frosty-wind.github.io/tags/%E5%90%8E%E7%AB%AF/" rel="tag"># -后端</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/frosty-wind.github.io/year/12/11/PHP%E5%AD%A6%E4%B9%A0/" rel="next" title="PHP学习">
                <i class="fa fa-chevron-left"></i> PHP学习
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/frosty-wind.github.io/year/12/24/HTML-CSS-JS/" rel="prev" title="HTML+CSS+JS 学习">
                HTML+CSS+JS 学习 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">frosty</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/frosty-wind.github.io/archives">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/frosty-wind.github.io/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/frosty-wind.github.io/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MYSQL-SQL-学习"><span class="nav-number">1.</span> <span class="nav-text">MYSQL(SQL)学习</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#windows-cmd-下mysql一些基本命令"><span class="nav-number">1.1.</span> <span class="nav-text">windows cmd 下mysql一些基本命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作学习"><span class="nav-number">1.2.</span> <span class="nav-text">操作学习</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#启动和停止MySQL"><span class="nav-number">1.2.1.</span> <span class="nav-text">启动和停止MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#登入退出mysql"><span class="nav-number">1.2.2.</span> <span class="nav-text">登入退出mysql</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置字符集"><span class="nav-number">1.2.3.</span> <span class="nav-text">设置字符集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本操作-库"><span class="nav-number">1.2.4.</span> <span class="nav-text">基本操作(库)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建数据库"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#显示数据库"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">显示数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#显示数据库-1"><span class="nav-number">1.2.4.3.</span> <span class="nav-text">显示数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改数据库"><span class="nav-number">1.2.4.4.</span> <span class="nav-text">修改数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除数据库"><span class="nav-number">1.2.4.5.</span> <span class="nav-text">删除数据库</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本操作-表"><span class="nav-number">1.2.5.</span> <span class="nav-text">基本操作(表)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建数据表-需先进入数据库"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">创建数据表(需先进入数据库)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#显示表"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">显示表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改表结构"><span class="nav-number">1.2.5.3.</span> <span class="nav-text">修改表结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除表结构"><span class="nav-number">1.2.5.4.</span> <span class="nav-text">删除表结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本操作-数据"><span class="nav-number">1.2.6.</span> <span class="nav-text">基本操作(数据)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#插入操作-将数据存储在数据表-字段-里"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">插入操作(将数据存储在数据表(字段)里)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询操作"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">查询操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除操作"><span class="nav-number">1.2.6.3.</span> <span class="nav-text">删除操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更新操作"><span class="nav-number">1.2.6.4.</span> <span class="nav-text">更新操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字段类型-列类型"><span class="nav-number">1.2.7.</span> <span class="nav-text">字段类型(列类型)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#整数类型"><span class="nav-number">1.2.7.1.</span> <span class="nav-text">整数类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#小数类型"><span class="nav-number">1.2.7.2.</span> <span class="nav-text">小数类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#时间日期类型"><span class="nav-number">1.2.7.3.</span> <span class="nav-text">时间日期类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串"><span class="nav-number">1.2.7.4.</span> <span class="nav-text">字符串</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字段属性-列属性"><span class="nav-number">1.2.8.</span> <span class="nav-text">字段属性(列属性)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Null属性"><span class="nav-number">1.2.8.1.</span> <span class="nav-text">Null属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#默认值"><span class="nav-number">1.2.8.2.</span> <span class="nav-text">默认值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#列描述"><span class="nav-number">1.2.8.3.</span> <span class="nav-text">列描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#主键"><span class="nav-number">1.2.8.4.</span> <span class="nav-text">主键</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建主键"><span class="nav-number">1.2.8.4.1.</span> <span class="nav-text">创建主键</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看主键"><span class="nav-number">1.2.8.4.2.</span> <span class="nav-text">查看主键</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除主键"><span class="nav-number">1.2.8.4.3.</span> <span class="nav-text">删除主键</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#复合主键"><span class="nav-number">1.2.8.4.4.</span> <span class="nav-text">复合主键</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#主键约束"><span class="nav-number">1.2.8.4.5.</span> <span class="nav-text">主键约束</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自动增长"><span class="nav-number">1.2.8.5.</span> <span class="nav-text">自动增长</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#初始设置"><span class="nav-number">1.2.8.5.1.</span> <span class="nav-text">初始设置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用自动增长"><span class="nav-number">1.2.8.5.2.</span> <span class="nav-text">使用自动增长</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#修改自动增长"><span class="nav-number">1.2.8.5.3.</span> <span class="nav-text">修改自动增长</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除自增长"><span class="nav-number">1.2.8.5.4.</span> <span class="nav-text">删除自增长</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#唯一键"><span class="nav-number">1.2.8.6.</span> <span class="nav-text">唯一键</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建唯一键"><span class="nav-number">1.2.8.6.1.</span> <span class="nav-text">创建唯一键</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看唯一键"><span class="nav-number">1.2.8.6.2.</span> <span class="nav-text">查看唯一键</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除唯一键"><span class="nav-number">1.2.8.6.3.</span> <span class="nav-text">删除唯一键</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#复合唯一键"><span class="nav-number">1.2.8.6.4.</span> <span class="nav-text">复合唯一键</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表关系"><span class="nav-number">1.2.9.</span> <span class="nav-text">表关系</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一对一"><span class="nav-number">1.2.9.1.</span> <span class="nav-text">一对一</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一对多"><span class="nav-number">1.2.9.2.</span> <span class="nav-text">一对多</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多对多"><span class="nav-number">1.2.9.3.</span> <span class="nav-text">多对多</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高级数据操作"><span class="nav-number">1.2.10.</span> <span class="nav-text">高级数据操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#新增数据"><span class="nav-number">1.2.10.1.</span> <span class="nav-text">新增数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#多数据插入"><span class="nav-number">1.2.10.1.1.</span> <span class="nav-text">多数据插入</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#主键冲突"><span class="nav-number">1.2.10.1.2.</span> <span class="nav-text">主键冲突</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#蠕虫复制"><span class="nav-number">1.2.10.1.3.</span> <span class="nav-text">蠕虫复制</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更新数据"><span class="nav-number">1.2.10.2.</span> <span class="nav-text">更新数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除数据"><span class="nav-number">1.2.10.3.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询数据"><span class="nav-number">1.2.10.4.</span> <span class="nav-text">查询数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Select-选项"><span class="nav-number">1.2.10.4.1.</span> <span class="nav-text">Select 选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#字段列表"><span class="nav-number">1.2.10.4.2.</span> <span class="nav-text">字段列表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#from-数据源"><span class="nav-number">1.2.10.4.3.</span> <span class="nav-text">from 数据源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#where子句"><span class="nav-number">1.2.10.4.4.</span> <span class="nav-text">where子句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Group-by-子句"><span class="nav-number">1.2.10.4.5.</span> <span class="nav-text">Group by 子句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#having子句"><span class="nav-number">1.2.10.4.6.</span> <span class="nav-text">having子句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#order-by-子句"><span class="nav-number">1.2.10.4.7.</span> <span class="nav-text">order by 子句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#limit-子句"><span class="nav-number">1.2.10.4.8.</span> <span class="nav-text">limit 子句</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询中的运算符"><span class="nav-number">1.2.10.5.</span> <span class="nav-text">查询中的运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#算术运算符"><span class="nav-number">1.2.10.5.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#比较运算符"><span class="nav-number">1.2.10.5.2.</span> <span class="nav-text">比较运算符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">1.2.10.5.3.</span> <span class="nav-text">逻辑运算符</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#联合查询"><span class="nav-number">1.2.10.6.</span> <span class="nav-text">联合查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#order-by的使用"><span class="nav-number">1.2.10.6.1.</span> <span class="nav-text">order by的使用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接查询"><span class="nav-number">1.2.10.7.</span> <span class="nav-text">连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#分类"><span class="nav-number">1.2.10.7.1.</span> <span class="nav-text">分类</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using关键字"><span class="nav-number">1.2.10.8.</span> <span class="nav-text">Using关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子查询"><span class="nav-number">1.2.10.9.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#标量子查询"><span class="nav-number">1.2.10.9.1.</span> <span class="nav-text">标量子查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#列子查询"><span class="nav-number">1.2.10.9.2.</span> <span class="nav-text">列子查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#行子查询"><span class="nav-number">1.2.10.9.3.</span> <span class="nav-text">行子查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#表子查询"><span class="nav-number">1.2.10.9.4.</span> <span class="nav-text">表子查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Exists子查询"><span class="nav-number">1.2.10.9.5.</span> <span class="nav-text">Exists子查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#子查询关键字"><span class="nav-number">1.2.10.9.6.</span> <span class="nav-text">子查询关键字</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整库数据备份与还原"><span class="nav-number">1.2.11.</span> <span class="nav-text">整库数据备份与还原</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL备份"><span class="nav-number">1.2.11.1.</span> <span class="nav-text">SQL备份</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#整库备份"><span class="nav-number">1.2.11.1.1.</span> <span class="nav-text">整库备份</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#单表备份-见多表备份"><span class="nav-number">1.2.11.1.2.</span> <span class="nav-text">单表备份(见多表备份)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#多表备份"><span class="nav-number">1.2.11.1.3.</span> <span class="nav-text">多表备份</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据还原"><span class="nav-number">1.2.11.2.</span> <span class="nav-text">数据还原</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#通过mysql-exe客户端"><span class="nav-number">1.2.11.2.1.</span> <span class="nav-text">通过mysql.exe客户端</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SQL指令"><span class="nav-number">1.2.11.2.2.</span> <span class="nav-text">SQL指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#人为操作"><span class="nav-number">1.2.11.2.3.</span> <span class="nav-text">人为操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户权限管理"><span class="nav-number">1.2.12.</span> <span class="nav-text">用户权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#用户管理"><span class="nav-number">1.2.12.1.</span> <span class="nav-text">用户管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建用户"><span class="nav-number">1.2.12.1.1.</span> <span class="nav-text">创建用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除用户"><span class="nav-number">1.2.12.1.2.</span> <span class="nav-text">删除用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#修改用户密码"><span class="nav-number">1.2.12.1.3.</span> <span class="nav-text">修改用户密码</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#权限管理"><span class="nav-number">1.2.12.2.</span> <span class="nav-text">权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#授予权限"><span class="nav-number">1.2.12.2.1.</span> <span class="nav-text">授予权限</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#取消权限"><span class="nav-number">1.2.12.2.2.</span> <span class="nav-text">取消权限</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#刷新权限"><span class="nav-number">1.2.12.2.3.</span> <span class="nav-text">刷新权限</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#外键"><span class="nav-number">1.2.13.</span> <span class="nav-text">外键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图"><span class="nav-number">1.2.14.</span> <span class="nav-text">视图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建视图"><span class="nav-number">1.2.14.1.</span> <span class="nav-text">创建视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用视图"><span class="nav-number">1.2.14.2.</span> <span class="nav-text">使用视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改视图"><span class="nav-number">1.2.14.3.</span> <span class="nav-text">修改视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除视图"><span class="nav-number">1.2.14.4.</span> <span class="nav-text">删除视图</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事务"><span class="nav-number">1.2.15.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#自动事务"><span class="nav-number">1.2.15.1.</span> <span class="nav-text">自动事务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#手动事务"><span class="nav-number">1.2.15.2.</span> <span class="nav-text">手动事务</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#开启事务"><span class="nav-number">1.2.15.2.1.</span> <span class="nav-text">开启事务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#执行事务"><span class="nav-number">1.2.15.2.2.</span> <span class="nav-text">执行事务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#提交事务"><span class="nav-number">1.2.15.2.3.</span> <span class="nav-text">提交事务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#回滚点"><span class="nav-number">1.2.15.2.4.</span> <span class="nav-text">回滚点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">1.2.16.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#系统变量"><span class="nav-number">1.2.16.1.</span> <span class="nav-text">系统变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#会话变量"><span class="nav-number">1.2.16.2.</span> <span class="nav-text">会话变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#局部变量"><span class="nav-number">1.2.16.3.</span> <span class="nav-text">局部变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#流程结构"><span class="nav-number">1.2.17.</span> <span class="nav-text">流程结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if分支"><span class="nav-number">1.2.17.1.</span> <span class="nav-text">if分支</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#基本语法"><span class="nav-number">1.2.17.1.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#复合语法"><span class="nav-number">1.2.17.1.2.</span> <span class="nav-text">复合语法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while循环"><span class="nav-number">1.2.17.2.</span> <span class="nav-text">while循环</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#基本语法-1"><span class="nav-number">1.2.17.2.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#结构标识符"><span class="nav-number">1.2.17.2.2.</span> <span class="nav-text">结构标识符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数"><span class="nav-number">1.2.18.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#内置函数-部分"><span class="nav-number">1.2.18.1.</span> <span class="nav-text">内置函数(部分)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#字符串函数"><span class="nav-number">1.2.18.1.1.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#时间函数"><span class="nav-number">1.2.18.1.2.</span> <span class="nav-text">时间函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#数学函数"><span class="nav-number">1.2.18.1.3.</span> <span class="nav-text">数学函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#其他函数"><span class="nav-number">1.2.18.1.4.</span> <span class="nav-text">其他函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自定义函数"><span class="nav-number">1.2.18.2.</span> <span class="nav-text">自定义函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建函数"><span class="nav-number">1.2.18.2.1.</span> <span class="nav-text">创建函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看函数"><span class="nav-number">1.2.18.2.2.</span> <span class="nav-text">查看函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#调用函数"><span class="nav-number">1.2.18.2.3.</span> <span class="nav-text">调用函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除函数"><span class="nav-number">1.2.18.2.4.</span> <span class="nav-text">删除函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#注意事项"><span class="nav-number">1.2.18.2.5.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量作用域"><span class="nav-number">1.2.19.</span> <span class="nav-text">变量作用域</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#局部作用域"><span class="nav-number">1.2.19.1.</span> <span class="nav-text">局部作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#会话作用域"><span class="nav-number">1.2.19.2.</span> <span class="nav-text">会话作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#全局作用域"><span class="nav-number">1.2.19.3.</span> <span class="nav-text">全局作用域</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#存储过程"><span class="nav-number">1.2.20.</span> <span class="nav-text">存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#概念"><span class="nav-number">1.2.20.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#与函数的区别"><span class="nav-number">1.2.20.2.</span> <span class="nav-text">与函数的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#相同点"><span class="nav-number">1.2.20.2.1.</span> <span class="nav-text">相同点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#不同点"><span class="nav-number">1.2.20.2.2.</span> <span class="nav-text">不同点</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基本操作"><span class="nav-number">1.2.20.3.</span> <span class="nav-text">基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建过程"><span class="nav-number">1.2.20.3.1.</span> <span class="nav-text">创建过程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看过程"><span class="nav-number">1.2.20.3.2.</span> <span class="nav-text">查看过程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#调用过程"><span class="nav-number">1.2.20.3.3.</span> <span class="nav-text">调用过程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除过程"><span class="nav-number">1.2.20.3.4.</span> <span class="nav-text">删除过程</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#参数类型"><span class="nav-number">1.2.20.4.</span> <span class="nav-text">参数类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#In"><span class="nav-number">1.2.20.4.1.</span> <span class="nav-text">In</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Out"><span class="nav-number">1.2.20.4.2.</span> <span class="nav-text">Out</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Inout"><span class="nav-number">1.2.20.4.3.</span> <span class="nav-text">Inout</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用"><span class="nav-number">1.2.20.4.4.</span> <span class="nav-text">使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#触发器"><span class="nav-number">1.2.21.</span> <span class="nav-text">触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#触发器概念"><span class="nav-number">1.2.21.1.</span> <span class="nav-text">触发器概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#作用"><span class="nav-number">1.2.21.2.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#优缺点"><span class="nav-number">1.2.21.3.</span> <span class="nav-text">优缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#优点"><span class="nav-number">1.2.21.3.1.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#缺点"><span class="nav-number">1.2.21.3.2.</span> <span class="nav-text">缺点</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基本操作-1"><span class="nav-number">1.2.21.4.</span> <span class="nav-text">基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建触发器"><span class="nav-number">1.2.21.4.1.</span> <span class="nav-text">创建触发器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看触发器"><span class="nav-number">1.2.21.4.2.</span> <span class="nav-text">查看触发器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#触发触发器"><span class="nav-number">1.2.21.4.3.</span> <span class="nav-text">触发触发器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除触发器"><span class="nav-number">1.2.21.4.4.</span> <span class="nav-text">删除触发器</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#应用"><span class="nav-number">1.2.21.5.</span> <span class="nav-text">应用</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">frosty</span>

  
</div>






  <span class="post-meta-divider">|</span>








        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/frosty-wind.github.io/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/frosty-wind.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/frosty-wind.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/frosty-wind.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/frosty-wind.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/frosty-wind.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/frosty-wind.github.io/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/frosty-wind.github.io/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/frosty-wind.github.io/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/frosty-wind.github.io/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/frosty-wind.github.io/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/frosty-wind.github.io/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/frosty-wind.github.io/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
